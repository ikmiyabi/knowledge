"use strict";(self.webpackChunkknowledge=self.webpackChunkknowledge||[]).push([[8910],{9840:(s,n,a)=>{a.r(n),a.d(n,{data:()=>e});const e={key:"v-209df0a1",path:"/backend/ruby/%E3%80%90Ruby%20on%20Rails%E3%80%91%E9%96%8B%E7%99%BA%E3%81%AE%E6%B5%81%E3%82%8C.html",title:"RubyonRailsとは？",lang:"ja",frontmatter:{},excerpt:"",headers:[{level:2,title:"前準備(Macの場合)",slug:"前準備-macの場合",children:[]},{level:2,title:"railsプロジェクトを作成する",slug:"railsプロジェクトを作成する",children:[]},{level:2,title:"プロジェクトで使用するdbを作成する",slug:"プロジェクトで使用するdbを作成する",children:[]},{level:2,title:"gitの初期設定と最初のコミットを行う",slug:"gitの初期設定と最初のコミットを行う",children:[]},{level:2,title:"モデルを作成する",slug:"モデルを作成する",children:[]},{level:2,title:"scaffoldでモデル・コントローラ・ビューをまとめて作成する",slug:"scaffoldでモデル・コントローラ・ビューをまとめて作成する",children:[]},{level:2,title:"カラムの追加",slug:"カラムの追加",children:[]},{level:2,title:"ルーティング設定を行う",slug:"ルーティング設定を行う",children:[]},{level:2,title:"パスの設定",slug:"パスの設定",children:[]},{level:2,title:"コントローラを作成する",slug:"コントローラを作成する",children:[]},{level:2,title:"部品の共通化",slug:"部品の共通化",children:[]}],filePathRelative:"backend/ruby/【Ruby on Rails】開発の流れ.md",git:{updatedTime:1639532968e3,contributors:[{name:"bamv-ikeda",email:"ikeda@bamv.co.jp",commits:1}]}}},9640:(s,n,a)=>{a.r(n),a.d(n,{default:()=>t});const e=(0,a(6252).uE)('<h1 id="rubyonrailsとは" tabindex="-1"><a class="header-anchor" href="#rubyonrailsとは" aria-hidden="true">#</a> RubyonRailsとは？</h1><ul><li>プログラミング言語Rubyで記述されたフレームワーク</li><li>デンマークのプログラマーであるデイヴィッド・ハイネマイヤー・ハンソン氏が2004年にOSSとして公開</li><li>主な特徴は下記の3つ</li></ul><ol><li>MVCアーキテクチャ</li></ol><p>処理をモデル(Model), ビュー(View)、コントローラ(Controller)の3つの役割に分ける考え方。</p><ol start="2"><li>同じことを繰り返さない(DRY原則: Dont Repeat Yourself)</li></ol><p>設定などの作業はできるだけ一度で済むようになっていたり、同じコードを繰り返し書かずにすむように設計されている。</p><ol start="3"><li>設定より規約(CoC: Convention over Configuration)</li></ol><p>様々な規約を設けることで、細かい設定を記述する手間がかからないようになっている。</p><h1 id="ruby-on-railsの導入" tabindex="-1"><a class="header-anchor" href="#ruby-on-railsの導入" aria-hidden="true">#</a> Ruby on Railsの導入</h1><h2 id="前準備-macの場合" tabindex="-1"><a class="header-anchor" href="#前準備-macの場合" aria-hidden="true">#</a> 前準備(Macの場合)</h2><ul><li>railsをインストールする</li><li>rbenv, ruby-buildをインストールする</li><li>mysqlをインストールする</li><li>bundlerをインストールする</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># homebrewで各種ソフトウェアを追加する</span>\nbrew <span class="token function">install</span> mysql\nbrew <span class="token function">install</span> rbenv\nbrew <span class="token function">install</span> ruby-build\n\n<span class="token comment"># ruby2.5.1をインストールする</span>\nrbenv <span class="token function">install</span> <span class="token number">2.5</span>.1\n<span class="token comment"># rubyのバージョンを2.5.1に指定する</span>\nrbenv <span class="token builtin class-name">local</span> <span class="token number">2.5</span>.1\n<span class="token comment"># rubyのバージョンの確認</span>\nrbenv versions\n\n<span class="token comment"># bundlerをインスールする</span>\ngem <span class="token function">install</span> bundler\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="railsプロジェクトを作成する" tabindex="-1"><a class="header-anchor" href="#railsプロジェクトを作成する" aria-hidden="true">#</a> railsプロジェクトを作成する</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rails new rails_app --database<span class="token operator">=</span>mysql --skip-bundle\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>--databaseオプションを指定しない場合はSQLiteになる</li><li>--skip-bundleオプションをつけると、最初の <code>bundle install</code> をスキップする</li><li>--skip-testオプションをつけると、テストコードを作成しない</li></ul><h2 id="プロジェクトで使用するdbを作成する" tabindex="-1"><a class="header-anchor" href="#プロジェクトで使用するdbを作成する" aria-hidden="true">#</a> プロジェクトで使用するdbを作成する</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># dbを作成する</span>\nrails db:create\n<span class="token comment"># mysqlにログインして確認する</span>\nrails db\nmysql<span class="token operator">&gt;</span> show databases<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="gitの初期設定と最初のコミットを行う" tabindex="-1"><a class="header-anchor" href="#gitの初期設定と最初のコミットを行う" aria-hidden="true">#</a> gitの初期設定と最初のコミットを行う</h2><ul><li>事前にGitHubやGitLabでリポジトリを作成しておく</li></ul><div class="language-git ext-git line-numbers-mode"><pre class="language-git"><code>git init\ngit remote add origin [リポジトリ名]\ngit add .\ngit commit -m <span class="token string">&quot;Start [rails_app] project&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="モデルの開発" tabindex="-1"><a class="header-anchor" href="#モデルの開発" aria-hidden="true">#</a> モデルの開発</h1><h2 id="モデルを作成する" tabindex="-1"><a class="header-anchor" href="#モデルを作成する" aria-hidden="true">#</a> モデルを作成する</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rails g model Customer name:string age:string comment:text\n<span class="token comment">#ファイルを確認し、問題なければマイグレートを実行する</span>\nrails db:migrate\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="scaffoldでモデル・コントローラ・ビューをまとめて作成する" tabindex="-1"><a class="header-anchor" href="#scaffoldでモデル・コントローラ・ビューをまとめて作成する" aria-hidden="true">#</a> scaffoldでモデル・コントローラ・ビューをまとめて作成する</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rails g scaffold Company name:string url:string\nrails db:migrate\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="カラムの追加" tabindex="-1"><a class="header-anchor" href="#カラムの追加" aria-hidden="true">#</a> カラムの追加</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rails g migration AddCommentToCustomer comment:text\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>すること</p><ul><li>modelの修正: バリデーションの追加</li><li>routerの修正: ページが増える場合は修正</li><li>controllerの修正: ストロングパラメータの許可を追加</li><li>viewの修正: フォーム、一覧、詳細に表示される個所を修正</li></ul><h1 id="ルーティングの設定" tabindex="-1"><a class="header-anchor" href="#ルーティングの設定" aria-hidden="true">#</a> ルーティングの設定</h1><h2 id="ルーティング設定を行う" tabindex="-1"><a class="header-anchor" href="#ルーティング設定を行う" aria-hidden="true">#</a> ルーティング設定を行う</h2><ul><li><code>config/routes.rb</code> を修正することでルーティングの設定を行う</li></ul><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code><span class="token constant">Rails</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>\n  <span class="token comment"># CRUD</span>\n  get <span class="token string">&#39;customers/:id&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#show&#39;</span>\n  post <span class="token string">&#39;customers&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#create&#39;</span>\n  put <span class="token string">&#39;customers/:id&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#update&#39;</span>\n  delete <span class="token string">&#39;customers/:id&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#destroy&#39;</span>\n\n  <span class="token comment"># index: show の補助ページ</span>\n  get <span class="token string">&#39;customers&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#index&#39;</span>\n\n  <span class="token comment"># new: 新規作成用のフォームページ</span>\n  get <span class="token string">&#39;customers/new&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#new&#39;</span>\n\n  <span class="token comment"># edit: 更新用のフォームページ</span>\n  get <span class="token string">&#39;customers/:id/edit&#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&#39;customers#edit&#39;</span>\n<span class="token keyword">end</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>RESTfulな画面のルーティングを行う場合、下記のようにすればまとめて設定できる</li></ul><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code><span class="token constant">Rails</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>\n  root to<span class="token punctuation">:</span> <span class="token string">&#39;customers#index&#39;</span>\n  resources <span class="token symbol">:customers</span>\n<span class="token keyword">end</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="パスの設定" tabindex="-1"><a class="header-anchor" href="#パスの設定" aria-hidden="true">#</a> パスの設定</h2><table><thead><tr><th style="text-align:left;">ルーティング</th><th style="text-align:left;">リンク生成メソッドの例</th><th style="text-align:left;">生成されるリンク例</th></tr></thead><tbody><tr><td style="text-align:left;">index</td><td style="text-align:left;">employee_path</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">show</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">new</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">edit</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr></tbody></table><h1 id="urlを深掘りするオプション" tabindex="-1"><a class="header-anchor" href="#urlを深掘りするオプション" aria-hidden="true">#</a> URLを深掘りするオプション</h1><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code>  resources <span class="token symbol">:users</span><span class="token punctuation">,</span> only<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token symbol">:index</span><span class="token punctuation">,</span> <span class="token symbol">:show</span><span class="token punctuation">,</span> <span class="token symbol">:new</span><span class="token punctuation">,</span> <span class="token symbol">:create</span><span class="token punctuation">]</span> <span class="token keyword">do</span>\n    member <span class="token keyword">do</span>\n      get <span class="token symbol">:followings</span>\n      get <span class="token symbol">:followers</span>\n    <span class="token keyword">end</span>\n    collection <span class="token keyword">do</span>\n      get <span class="token symbol">:search</span>\n    <span class="token keyword">end</span>\n  <span class="token keyword">end</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h1 id="コントローラの開発" tabindex="-1"><a class="header-anchor" href="#コントローラの開発" aria-hidden="true">#</a> コントローラの開発</h1><h2 id="コントローラを作成する" tabindex="-1"><a class="header-anchor" href="#コントローラを作成する" aria-hidden="true">#</a> コントローラを作成する</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rails g controller Company\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><p>helperが不要であれば、--no-helperオプションをつける</p></li><li><p>assetsが不要であれば、--no-assetsオプションをつける</p></li><li><p>作成されたファイルにメソッドを追加する</p></li></ul><p>app/controllers/customer_controller.rb</p><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code>before_action <span class="token symbol">:set_message</span><span class="token punctuation">,</span> only<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token symbol">:show</span><span class="token punctuation">,</span> <span class="token symbol">:edit</span><span class="token punctuation">,</span> <span class="token symbol">:update</span><span class="token punctuation">,</span> <span class="token symbol">:destroy</span><span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>のようにして共通化することができる</p><ul><li>RESTfulな画面のルーティングを行う場合、下記のようにすればまとめて設定できる</li></ul><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code><span class="token constant">Rails</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>\n  resources <span class="token symbol">:customers</span>\n<span class="token keyword">end</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="部品の共通化" tabindex="-1"><a class="header-anchor" href="#部品の共通化" aria-hidden="true">#</a> 部品の共通化</h2><ul><li>privateメソッドに処理をまとめる</li><li>before_action を使用することで、Action実行前にまとめて実行させることができる</li></ul><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code>before_action <span class="token symbol">:set_message</span><span class="token punctuation">,</span> only<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token symbol">:show</span><span class="token punctuation">,</span> <span class="token symbol">:edit</span><span class="token punctuation">,</span> <span class="token symbol">:update</span><span class="token punctuation">,</span> <span class="token symbol">:destroy</span><span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>パーシャル： <code>_form.html.erb</code> のように _ から始めて View の共通部を抜き出したものを使用する</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code># 呼び出し側は下のようにして呼び出す\n&lt;%= render &#39;form&#39;, message: @message %&gt;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',53),l={},t=(0,a(3744).Z)(l,[["render",function(s,n){return e}]])},3744:(s,n)=>{n.Z=(s,n)=>{const a=s.__vccOpts||s;for(const[s,e]of n)a[s]=e;return a}}}]);