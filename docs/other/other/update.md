# update_special_product性能改善
## 既存仕様

調査資料のリンクを貼る

実行時間が最も多くかかっているのは、generate_csvタスク

### generate_csvタスクの処理の概要

- csvファイルの読み込み
- 行ごとに以下を実行
  - 行をhash化
  - conditionを判定1件あたり0.1秒
  - 

## 対応方針

### 概要

1. 全体の速度改善を行う
   1. condition.rbの条件を削減
   2. 不要な判定処理を行わないように修正
2. 更新対象を限定する
   1. 
3. キーワード更新の手順を簡略化する

### 1.全体の速度を向上する

・

### 2.特集テーマの更新対象を限定する

既存の仕様では、特集テーマが更新される契機は大きく以下の3パターン

- 製品が更新された場合
- 製品に紐づくカテゴリーグループが更新された場合
- 新規出展企業の条件を満たさなくなった場合
  - CVが3件以上になった
  - 1週間以上経過した

修正後は、以下の2パターンを変更する

- 製品が更新された場合
- 新規出展企業の条件を満たさなくなった場合
  - CVが3件以上になった
  - 1週間以上経過した

### 3.キーワード更新の手順を簡略化する
